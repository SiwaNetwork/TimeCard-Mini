# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
## QUANTUM MINI-PCI TIMECARD

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
**–î–∞—Ç–∞:** 17 –æ–∫—Ç—è–±—Ä—è 2025  
**–ò–∑–¥–µ–ª–∏–µ:** Quantum Mini-PCI Timecard —Å —Å–∏—Å—Ç–µ–º–æ–π —Ç–æ—á–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ Shiwa Time

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ –∏ –æ–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è](#1-–≤–≤–µ–¥–µ–Ω–∏–µ-–∏-–æ–±—â–∏–µ-—Å–≤–µ–¥–µ–Ω–∏—è)
   - 1.1 [–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑–¥–µ–ª–∏—è](#11-–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ-–∏–∑–¥–µ–ª–∏—è)
   - 1.2 [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏](#12-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏)
   - 1.3 [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã](#13-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—Å–∏—Å—Ç–µ–º—ã)
   
2. [–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É](#2-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–∫-—É—Å—Ç—Ä–æ–π—Å—Ç–≤—É)
   - 2.1 [–ü–æ–∏—Å–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ —Å–µ—Ç–∏](#21-–ø–æ–∏—Å–∫-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞-–≤-—Å–µ—Ç–∏)
   - 2.2 [–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH](#22-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–ø–æ-ssh)
   - 2.3 [–ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É](#23-–ø–µ—Ä–≤—ã–π-–≤—Ö–æ–¥-–≤-—Å–∏—Å—Ç–µ–º—É)

3. [–û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](#3-–æ—Å–Ω–æ–≤–Ω—ã–µ-–æ–ø–µ—Ä–∞—Ü–∏–∏-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
   - 3.1 [–ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã](#31-–±—ã—Å—Ç—Ä—ã–µ-–∫–æ–º–∞–Ω–¥—ã)
   - 3.2 [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã](#32-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Å—Ç–∞—Ç—É—Å–∞-—Å–∏—Å—Ç–µ–º—ã)
   - 3.3 [–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤](#33-–ø—Ä–æ—Å–º–æ—Ç—Ä-–ª–æ–≥–æ–≤)
   - 3.4 [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º](#34-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—Å–µ—Ä–≤–∏—Å–æ–º)

4. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞](#4-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
   - 4.1 [–ü—Ä–æ–≤–µ—Ä–∫–∞ PTP —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏](#41-–ø—Ä–æ–≤–µ—Ä–∫–∞-ptp-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
   - 4.2 [–ü—Ä–æ–≤–µ—Ä–∫–∞ GNSS —Å—Ç–∞—Ç—É—Å–∞](#42-–ø—Ä–æ–≤–µ—Ä–∫–∞-gnss-—Å—Ç–∞—Ç—É—Å–∞)
   - 4.3 [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –≤—Ä–µ–º–µ–Ω–∏](#43-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Ç–æ—á–Ω–æ—Å—Ç–∏-–≤—Ä–µ–º–µ–Ω–∏)
   - 4.4 [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–∏—Å—Ç–µ–º—ã](#44-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-—Ä–µ—Å—É—Ä—Å–æ–≤-—Å–∏—Å—Ç–µ–º—ã)

5. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã](#5-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ-—Å–∏—Å—Ç–µ–º—ã)
   - 5.1 [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞](#51-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ-—Ñ–∞–π–ª–∞)
   - 5.2 [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ PTP –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤](#52-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-ptp-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
   - 5.3 [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ GNSS/PPS](#53-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-gnsspps)
   - 5.4 [–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π](#54-–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ-–∏–∑–º–µ–Ω–µ–Ω–∏–π)

6. [–í–µ–±-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Grafana](#6-–≤–µ–±-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-—á–µ—Ä–µ–∑-grafana)
   - 6.1 [–î–æ—Å—Ç—É–ø –∫ Grafana](#61-–¥–æ—Å—Ç—É–ø-–∫-grafana)
   - 6.2 [–û–±–∑–æ—Ä –¥–∞—à–±–æ—Ä–¥–æ–≤](#62-–æ–±–∑–æ—Ä-–¥–∞—à–±–æ—Ä–¥–æ–≤)
   - 6.3 [–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫](#63-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è-–º–µ—Ç—Ä–∏–∫)
   - 6.4 [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤](#64-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–∞–ª–µ—Ä—Ç–æ–≤)

7. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#7-—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)
   - 7.1 [–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è](#71-—Ç–∏–ø–∏—á–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã-–∏-—Ä–µ—à–µ–Ω–∏—è)
   - 7.2 [–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã](#72-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ-–∫–æ–º–∞–Ω–¥—ã)
   - 7.3 [–°–±—Ä–æ—Å –∫ –∑–∞–≤–æ–¥—Å–∫–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º](#73-—Å–±—Ä–æ—Å-–∫-–∑–∞–≤–æ–¥—Å–∫–∏–º-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º)

8. [–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#8-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
   - 8.1 [–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥](#81-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫-–∫–æ–º–∞–Ω–¥)
   - 8.2 [–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è PTP –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤](#82-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è-ptp-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
   - 8.3 [–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è](#83-–∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)

---

# 1. –í–≤–µ–¥–µ–Ω–∏–µ –∏ –æ–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è

## 1.1 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑–¥–µ–ª–∏—è

**QUANTUM MINI-PCI TIMECARD** - —ç—Ç–æ –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –±–∞–∑–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ **Shiwa Time**, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è:

- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏** –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö
- **–†–∞–±–æ—Ç—ã –≤ –∫–∞—á–µ—Å—Ç–≤–µ PTP Grandmaster** (IEEE 1588-2019)
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å GNSS** (GPS/GLONASS) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ—á–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ UTC
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏** –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º PTP –∏ NTP

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:** –¥–æ 30 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥  
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤:** PTP (IEEE 1588-2019), NTP, PPS  
‚úÖ **GNSS –ø—Ä–∏–µ–º–Ω–∏–∫:** u-blox LEA-M8F (GPS + GLONASS)  
‚úÖ **Hardware timestamping:** –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –º–µ—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏  
‚úÖ **–í–µ–±-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Grafana –∏ Elasticsearch  
‚úÖ **CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** —É–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ SSH  

---

## 1.2 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —á–∞—Å—Ç—å:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞** | Raspberry Pi (ARM64) |
| **–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä** | ARM Cortex (aarch64) |
| **–û–°** | Debian GNU/Linux (Raspberry Pi OS) |
| **–Ø–¥—Ä–æ** | Linux 6.6.31+rpt-rpi-v8 |
| **–ü–∞–º—è—Ç—å** | 4 GB RAM |
| **–•—Ä–∞–Ω–∏–ª–∏—â–µ** | SD Card (–º–∏–Ω–∏–º—É–º 16 GB) |
| **–°–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** | Ethernet (—Å Hardware Timestamping) |

### GNSS –ø—Ä–∏–µ–º–Ω–∏–∫:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **–ú–æ–¥–µ–ª—å** | u-blox LEA-M8F |
| **–°–∏—Å—Ç–µ–º—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏** | GPS + GLONASS |
| **–¢–æ—á–Ω–æ—Å—Ç—å PPS** | < 30 –Ω—Å (RMS) |
| **–ü–æ—Ä—Ç** | /dev/ttyS0 (UART) |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | 115200 baud |
| **–ê–Ω—Ç–µ–Ω–Ω–∞** | –ê–∫—Ç–∏–≤–Ω–∞—è GNSS –∞–Ω—Ç–µ–Ω–Ω–∞ |

### PTP –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **PTP Clock Class** | 6 (Primary Reference - GNSS) |
| **–¢–æ—á–Ω–æ—Å—Ç—å (Accuracy)** | 0x20 (25 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥) |
| **Time Source** | 0x20 (GPS/GNSS) |
| **PTP Domain** | 0 (default) |
| **PTP Profile** | Default (IEEE 1588-2019) |
| **Transport** | IPv4 UDP (–ø–æ—Ä—Ç—ã 319, 320) |

### –°–µ—Ç–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **IP-–∞–¥—Ä–µ—Å** | 192.168.16.163 (DHCP) |
| **Hostname** | grandmini |
| **SSH –ø–æ—Ä—Ç** | 22 |
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** | shiwa |
| **–ü–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** | 278934 |

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!

---

## 1.3 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ:

1. **Shiwa Time Service** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
   - –ü—É—Ç—å: `/usr/share/shiwatime/`
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `/etc/shiwatime/shiwatime.yml`
   - –õ–æ–≥–∏: `/var/log/shiwatime/`
   - –î–∞–Ω–Ω—ã–µ: `/var/lib/shiwatime/`

2. **Systemd Service**
   - –§–∞–π–ª: `/etc/systemd/system/shiwatime.service`
   - –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ systemctl

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ –≤ Elasticsearch
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ Grafana
   - –°–µ—Ä–≤–µ—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: http://90.156.231.174

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  GNSS –ê–Ω—Ç–µ–Ω–Ω–∞ (GPS/GLONASS)                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
                    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  u-blox LEA-M8F GNSS Receiver                       ‚îÇ
‚îÇ  - GPS + GLONASS                                    ‚îÇ
‚îÇ  - PPS Output (< 30 ns accuracy)                    ‚îÇ
‚îÇ  - NMEA Output (/dev/ttyS0)                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
                    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Quantum Mini-PCI Timecard (Raspberry Pi)           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  Shiwa Time Service                           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - PPS Input Processing                       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - PTP Grandmaster                            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - NTP Server                                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Hardware Timestamping                      ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
                    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Ethernet Network                                   ‚îÇ
‚îÇ  - PTP Messages (Ports 319, 320)                    ‚îÇ
‚îÇ  - NTP Requests (Port 123)                          ‚îÇ
‚îÇ  - Monitoring Data ‚Üí Elasticsearch                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

# 2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É

## 2.1 –ü–æ–∏—Å–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ —Å–µ—Ç–∏

–ï—Å–ª–∏ IP-–∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤:

### –ú–µ—Ç–æ–¥ 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —Å –ø–æ–º–æ—â—å—é —Å–∫—Ä–∏–ø—Ç–∞

```bash
# –°–∫–∞—á–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø–æ–∏—Å–∫–∞
cd /home/shiwa-time/TimeCard-Mini
chmod +x find-quantum-device.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–∏—Å–∫
./find-quantum-device.sh
```

**–í—ã–≤–æ–¥ —Å–∫—Ä–∏–ø—Ç–∞:**
```
üîç –ü–æ–∏—Å–∫ Quantum Mini-PCI Timecard –≤ —Å–µ—Ç–∏...
üì° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ç–∏: 192.168.16.0/24
üîé –ü–æ–∏—Å–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å SSH...

üñ•Ô∏è  –ù–∞–π–¥–µ–Ω–æ SSH —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: 192.168.16.163
‚úÖ üéØ –ù–ê–ô–î–ï–ù QUANTUM MINI-PCI: 192.168.16.163
   üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: ssh shiwa@192.168.16.163
   ‚úÖ GNSS: Connected
   ‚úÖ Shiwa Time: Running
```

### –ú–µ—Ç–æ–¥ 2: –†—É—á–Ω–æ–π –ø–æ–∏—Å–∫ —Å –ø–æ–º–æ—â—å—é nmap

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ nmap (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
sudo apt install nmap

# –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏
sudo nmap -sn 192.168.16.0/24

# –ü–æ–∏—Å–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å SSH
sudo nmap -p 22 --open 192.168.16.0/24
```

### –ú–µ—Ç–æ–¥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ ARP —Ç–∞–±–ª–∏—Ü—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä ARP —Ç–∞–±–ª–∏—Ü—ã
ip neigh show

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ arp
arp -a | grep grandmini
```

### –ú–µ—Ç–æ–¥ 4: –ü–æ–∏—Å–∫ –ø–æ hostname

```bash
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ –∏–º–µ–Ω–∏ —Ö–æ—Å—Ç–∞
ping grandmini.local
ssh shiwa@grandmini.local
```

---

## 2.2 –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH

### –ë–∞–∑–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ IP-–∞–¥—Ä–µ—Å –Ω–∞–π–¥–µ–Ω, –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É:

```bash
ssh shiwa@192.168.16.163
```

**–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** `shiwa`
- **–ü–∞—Ä–æ–ª—å:** `278934`

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSH-–∫–ª—é—á–∏
3. –û—Ç–∫–ª—é—á–∏—Ç—å –ø–∞—Ä–æ–ª—å–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é sshpass (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ sshpass
sudo apt install sshpass

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è
sshpass -p '278934' ssh shiwa@192.168.16.163
```

---

## 2.3 –ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω:

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                           ‚ïë
‚ïë        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó              ‚ïë
‚ïë        ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë    ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó             ‚ïë
‚ïë        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë             ‚ïë
‚ïë        ‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë             ‚ïë
‚ïë        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë             ‚ïë
‚ïë        ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù             ‚ïë
‚ïë        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó                   ‚ïë
‚ïë        ‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù                   ‚ïë
‚ïë           ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó                     ‚ïë
‚ïë           ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù                     ‚ïë
‚ïë           ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïù ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó                   ‚ïë
‚ïë           ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù                   ‚ïë
‚ïë                                                           ‚ïë
‚ïë              QUANTUM MINI-PCI TIMECARD                    ‚ïë
‚ïë                                                           ‚ïë
‚ïë         Precision Time Protocol Grandmaster               ‚ïë
‚ïë            GPS/GLONASS Synchronized Clock                 ‚ïë
‚ïë                                                           ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  System:     Linux 6.6.31+rpt-rpi-v8 aarch64
  Uptime:     2 hours 15 minutes
  IP:        192.168.16.163
  Shiwa Time: ‚óè Running
  GNSS:       ‚óè Connected
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Quick commands:
  status   - Check Shiwa Time status
  logs     - View logs
  config   - Edit configuration
  restart  - Restart service
```

### –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞:

- **System** - –≤–µ—Ä—Å–∏—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Uptime** - –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- **IP** - —Ç–µ–∫—É—â–∏–π IP-–∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **Shiwa Time** - —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (‚óè Running = —Ä–∞–±–æ—Ç–∞–µ—Ç)
- **GNSS** - —Å—Ç–∞—Ç—É—Å GNSS –ø—Ä–∏–µ–º–Ω–∏–∫–∞ (‚óè Connected = –ø–æ–¥–∫–ª—é—á–µ–Ω)

---

# 3. –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## 3.1 –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

–ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ —Å–∏—Å—Ç–µ–º—É –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –±—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

| –ö–æ–º–∞–Ω–¥–∞ | –ü–æ–ª–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------------|----------|
| `status` | `sudo systemctl status shiwatime` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞ |
| `logs` | `sudo journalctl -u shiwatime -f` | –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ |
| `config` | `sudo nano /etc/shiwatime/shiwatime.yml` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é |
| `restart` | `sudo systemctl restart shiwatime` | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å |

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±—ã—Å—Ç—Ä—ã—Ö –∫–æ–º–∞–Ω–¥:

```bash
# –ü—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞
shiwa@grandmini:~ $ status
```

---

## 3.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Shiwa Time

```bash
# –ö–æ—Ä–æ—Ç–∫–∞—è –∫–æ–º–∞–Ω–¥–∞
status

# –ò–ª–∏ –ø–æ–ª–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
sudo systemctl status shiwatime
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
‚óè shiwatime.service - Shiwa Time - PTP / NTP clock synchronisation system
     Loaded: loaded (/etc/systemd/system/shiwatime.service; enabled)
     Active: active (running) since Tue 2025-10-07 18:17:05 MSK
   Main PID: 977 (shiwatime)
      Tasks: 15
     Memory: 45.2M
        CPU: 7min 57s
```

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞:

- **Active: active (running)** ‚úÖ - —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- **Active: inactive (dead)** ‚ùå - —Å–µ—Ä–≤–∏—Å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- **Active: failed** ‚ùå - —Å–µ—Ä–≤–∏—Å –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π
- **enabled** ‚úÖ - –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤–∫–ª—é—á–µ–Ω
- **disabled** ‚ö†Ô∏è - –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –æ—Ç–∫–ª—é—á–µ–Ω

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤–∫–ª—é—á–µ–Ω –ª–∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl is-enabled shiwatime

# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable shiwatime

# –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl disable shiwatime
```

---

## 3.3 –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞
logs

# –ò–ª–∏ –ø–æ–ª–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
sudo journalctl -u shiwatime -f
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
Oct 08 14:44:54 grandmini shiwatime[977]: ts,2025-10-08 14:44:54.000000009 +0300 MSK,pps:eth0/0/0,primary,-9ns,0s,false
Oct 08 14:44:55 grandmini shiwatime[977]: adj,eth0,-9ns,0s,4188
Oct 08 14:44:55 grandmini shiwatime[977]: ts,2025-10-08 14:44:55.000000005 +0300 MSK,pps:eth0/0/0,primary,5ns,0s,false
```

### –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ª–æ–≥–æ–≤:

**–°—Ç—Ä–æ–∫–∞ `ts` (timestamp):**
```
ts,2025-10-08 14:44:54.000000009 +0300 MSK,pps:eth0/0/0,primary,-9ns,0s,false
```
- `2025-10-08 14:44:54.000000009` - —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è —Å –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é
- `pps:eth0/0/0` - –∏—Å—Ç–æ—á–Ω–∏–∫: PPS –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ eth0, pin 0, index 0
- `primary` - —Ç–∏–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (primary –∏–ª–∏ secondary)
- `-9ns` - **offset** (–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç —ç—Ç–∞–ª–æ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏)
- `0s` - –¥—Ä–µ–π—Ñ
- `false` - —Ñ–ª–∞–≥ –æ—à–∏–±–∫–∏

**–°—Ç—Ä–æ–∫–∞ `adj` (adjustment):**
```
adj,eth0,-9ns,0s,4188
```
- `eth0` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞
- `-9ns` - –≤–µ–ª–∏—á–∏–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ —á–∞—Å–æ–≤
- `4188` - —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
sudo journalctl -u shiwatime -n 50

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
sudo journalctl -u shiwatime -n 100

# –õ–æ–≥–∏ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u shiwatime --since "2025-10-17 10:00:00"

# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
sudo journalctl -u shiwatime --since "1 hour ago"
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤

```bash
# –¢–æ–ª—å–∫–æ PPS —Å–æ–±—ã—Ç–∏—è
sudo journalctl -u shiwatime | grep pps

# –¢–æ–ª—å–∫–æ GNSS —Å–æ–±—ã—Ç–∏—è
sudo journalctl -u shiwatime | grep gnss

# –¢–æ–ª—å–∫–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ —á–∞—Å–æ–≤
sudo journalctl -u shiwatime | grep adj

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
sudo journalctl -u shiwatime | grep -i error
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 1000 —Å—Ç—Ä–æ–∫ –≤ —Ñ–∞–π–ª
sudo journalctl -u shiwatime -n 1000 > ~/shiwatime_logs.txt

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
sudo journalctl -u shiwatime --since today > ~/shiwatime_today.txt
```

---

## 3.4 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
sudo systemctl start shiwatime

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å
sudo systemctl stop shiwatime

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å (–±—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞)
restart

# –ò–ª–∏ –ø–æ–ª–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
sudo systemctl restart shiwatime

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
sudo systemctl reload shiwatime
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–ø—É—â–µ–Ω –ª–∏ —Å–µ—Ä–≤–∏—Å
systemctl is-active shiwatime

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤–∫–ª—é—á–µ–Ω –ª–∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl is-enabled shiwatime

# –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ
systemctl show shiwatime
```

---

# 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

## 4.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ PTP —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä PTP –º–µ—Ç—Ä–∏–∫ –≤ –ª–æ–≥–∞—Ö

```bash
# –§–∏–ª—å—Ç—Ä PTP —Å–æ–±—ã—Ç–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u shiwatime -f | grep pps
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
ts,2025-10-17 11:50:00.000000015 +0300 MSK,pps:eth0/0/0,primary,15ns,0s,false
adj,eth0,15ns,0s,4210
ts,2025-10-17 11:50:01.000000009 +0300 MSK,pps:eth0/0/0,primary,9ns,0s,false
adj,eth0,9ns,0s,4211
```

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:

| Offset | –ö–∞—á–µ—Å—Ç–≤–æ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|--------|----------|--------------|
| **< 20 –Ω—Å** | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | –ò–¥–µ–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è |
| **20-50 –Ω—Å** | ‚úÖ –•–æ—Ä–æ—à–æ | –ü—Ä–∏–µ–º–ª–µ–º–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á |
| **50-100 –Ω—Å** | ‚ö†Ô∏è –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–±–µ–ª–∏ –∏ GNSS |
| **> 100 –Ω—Å** | ‚ùå –ü–ª–æ—Ö–æ | –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ |

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ PTP –∑–∞ –ø–µ—Ä–∏–æ–¥

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 PPS —Å–æ–±—ã—Ç–∏–π
sudo journalctl -u shiwatime -n 1000 | grep "pps:" | tail -100

# –°—Ä–µ–¥–Ω–∏–π offset –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å–æ–±—ã—Ç–∏–π
sudo journalctl -u shiwatime -n 1000 | grep "pps:" | grep -oP '\-?\d+ns' | sed 's/ns//' | awk '{sum+=$1; count++} END {print "Average offset: " sum/count " ns"}'
```

---

## 4.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ GNSS —Å—Ç–∞—Ç—É—Å–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è GNSS

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ GNSS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
ls -l /dev/ttyS0

# –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏:
# crw-rw---- 1 root dialout 4, 64 Oct 17 2025 /dev/ttyS0
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä GNSS —Å–æ–±—ã—Ç–∏–π –≤ –ª–æ–≥–∞—Ö

```bash
# GNSS —Å–æ–±—ã—Ç–∏—è
sudo journalctl -u shiwatime | grep -i gnss | tail -20
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
ts,2025-10-17 11:50:00.727777148 +0300 MSK,nmea(timebeat_opentimecard_mini):mini/dev/ttyS0/GNSS,secondary,272.222852ms,0s,false
```

### –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ GNSS –ª–æ–≥–∞:

- `nmea(timebeat_opentimecard_mini)` - –ø—Ä–æ—Ç–æ–∫–æ–ª –∏ —Ç–∏–ø –º–æ–¥—É–ª—è
- `mini/dev/ttyS0/GNSS` - –ø—É—Ç—å –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
- `secondary` - –≤—Ç–æ—Ä–∏—á–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –≤—Ä–µ–º–µ–Ω–∏ (majortime –¥–ª—è PPS)
- `272.222852ms` - offset –æ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ GNSS —Å–∏–≥–Ω–∞–ª–∞

```bash
# –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å GNSS –º–æ–¥—É–ª—è –Ω–∞–ø—Ä—è–º—É—é (Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞)
sudo cat /dev/ttyS0

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ screen/minicom
sudo screen /dev/ttyS0 115200
```

**–¢–∏–ø–∏—á–Ω—ã–µ NMEA —Å–æ–æ–±—â–µ–Ω–∏—è:**

```
$GPRMC,115000.00,A,5545.1234,N,03745.5678,E,0.0,0.0,171025,,,A*6B
$GPGGA,115000.00,5545.1234,N,03745.5678,E,1,12,0.9,145.2,M,14.7,M,,*5E
```

–ì–¥–µ:
- `A` –ø–æ—Å–ª–µ –≤—Ä–µ–º–µ–Ω–∏ = Fix –∞–∫—Ç–∏–≤–µ–Ω (—Ö–æ—Ä–æ—à–∏–π —Å–∏–≥–Ω–∞–ª)
- `V` = Fix –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–ø–ª–æ—Ö–æ–π —Å–∏–≥–Ω–∞–ª)
- `12` –≤ GPGGA = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø—É—Ç–Ω–∏–∫–æ–≤ (—á–µ–º –±–æ–ª—å—à–µ, —Ç–µ–º –ª—É—á—à–µ)

---

## 4.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –≤—Ä–µ–º–µ–Ω–∏

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º NTP —Å–µ—Ä–≤–µ—Ä–æ–º

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ntpdate
sudo apt install ntpdate

# –°—Ä–∞–≤–Ω–∏—Ç–µ –≤—Ä–µ–º—è —Å –ø—É–ª–æ–º NTP —Å–µ—Ä–≤–µ—Ä–æ–≤
sudo ntpdate -q pool.ntp.org
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
server 91.206.8.36, stratum 2, offset -0.000015, delay 0.02841
17 Oct 11:50:23 ntpdate[12345]: adjust time server 91.206.8.36 offset -0.000015 sec
```

- **offset -0.000015** = -15 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥ (–æ—Ç–ª–∏—á–Ω–æ –¥–ª—è NTP!)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

```bash
# –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
date

# –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
timedatectl

# –í—Ä–µ–º—è –≤ –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥–∞—Ö
date +%s.%N
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–Ω—ã–º –∏ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º

```bash
# –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω PTP Hardware Clock
sudo phc_ctl /dev/ptp0 get

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º
sudo phc2sys -s /dev/ptp0 -c CLOCK_REALTIME -O 0 -m -q
```

---

## 4.4 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–∏—Å—Ç–µ–º—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

```bash
# –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
top

# –ò–ª–∏ –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–π htop (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
htop

# Uptime –∏ load average
uptime
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
12:05:34 up 2:35, 2 users, load average: 0.12, 0.15, 0.08
```

**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è load average:**
- **< 1.0** ‚úÖ - —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–∞
- **1.0 - 2.0** ‚ö†Ô∏è - —É–º–µ—Ä–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
- **> 2.0** ‚ùå - –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–Ω–∞ 4-core –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
free -h
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
               total        used        free      shared  buff/cache   available
Mem:           3.7Gi       267Mi       2.7Gi       1.3Mi       865Mi       3.4Gi
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- **Available > 1 GB** ‚úÖ - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏
- **Available < 500 MB** ‚ö†Ô∏è - –º–∞–ª–æ —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏
- **Available < 100 MB** ‚ùå - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –º–∞–ª–æ –ø–∞–º—è—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h
```

**–í–∞–∂–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**

```
Filesystem      Size  Used Avail Use% Mounted on
/dev/mmcblk0p2   15G  4.2G  9.8G  30% /
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- **Use% < 70%** ‚úÖ - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞
- **Use% 70-85%** ‚ö†Ô∏è - —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –º–µ—Å—Ç–æ–º
- **Use% > 85%** ‚ùå - –æ—á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
ip -s link show eth0

# –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã
sudo ss -tulpn | grep -E "319|320|123"

# –ê–∫—Ç–∏–≤–Ω—ã–µ PTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
sudo tcpdump -i eth0 -nn port 319 or port 320 -c 10
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (–¥–ª—è Raspberry Pi)

```bash
# –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
vcgencmd measure_temp

# –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —á–∞—Å—Ç–æ—Ç–∞—Ö
vcgencmd measure_clock arm
vcgencmd get_throttled
```

---

# 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

## 5.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É:

```
/etc/shiwatime/shiwatime.yml
```

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞
config

# –ò–ª–∏ –ø–æ–ª–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
sudo nano /etc/shiwatime/shiwatime.yml
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –í—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º:

```bash
# –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
sudo cp /etc/shiwatime/shiwatime.yml /etc/shiwatime/shiwatime.yml.backup

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)
sudo cp /etc/shiwatime/shiwatime.yml.backup /etc/shiwatime/shiwatime.yml
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–µ–∫—Ü–∏–∏:

1. **shiwatime.name** - –∏–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
2. **inputs** - –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ (PTP, NTP, PPS, GNSS)
3. **servo** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞ —á–∞—Å–æ–≤
4. **phc** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö —á–∞—Å–æ–≤ (PHC)
5. **ptp** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã PTP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
6. **cli** - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
7. **http** - HTTP API
8. **logging** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
9. **output.elasticsearch** - —ç–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫

---

## 5.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PTP –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PTP Grandmaster

```yaml
shiwatime:
  inputs:
    primary_clocks:
      # PTP —Å–µ—Ä–≤–µ—Ä (Grandmaster mode)
      - protocol:              ptp
        domain:                0
        serve_unicast:         true
        serve_multicast:       true
        server_only:           true          # –¢–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä (Grandmaster)
        announce_interval:     1
        sync_interval:         0
        delayrequest_interval: 0
        priority1:             128
        priority2:             128
        monitor_only:          false
```

### –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã PTP:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|------------------------|
| `domain` | PTP –¥–æ–º–µ–Ω | 0 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) |
| `server_only` | –†–µ–∂–∏–º —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–∞ (Grandmaster) | true |
| `announce_interval` | –ò–Ω—Ç–µ—Ä–≤–∞–ª Announce —Å–æ–æ–±—â–µ–Ω–∏–π (log2) | 1 (2 —Å–µ–∫—É–Ω–¥—ã) |
| `sync_interval` | –ò–Ω—Ç–µ—Ä–≤–∞–ª Sync —Å–æ–æ–±—â–µ–Ω–∏–π (log2) | 0 (1 —Å–µ–∫—É–Ω–¥–∞) |
| `delayrequest_interval` | –ò–Ω—Ç–µ—Ä–≤–∞–ª Delay Request (log2) | 0 (1 —Å–µ–∫—É–Ω–¥–∞) |
| `priority1` | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (0-255) | 128 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) |
| `priority2` | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (0-255) | 128 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) |

### PTP Clock Quality

```yaml
ptp:
  clock_quality:
    announce_receipt_timeout: 3
    priority1:     128
    priority2:     128
    domain:        0
    class:         6              # GNSS synchronized
    accuracy:      0x20           # 25 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥
    variance:      0x4E20         # Offset scaled log variance
    timesource:    0x20           # GPS (GNSS)
```

**–ó–Ω–∞—á–µ–Ω–∏—è Clock Class:**
- `6` - Primary Reference (GNSS synchronized) ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**
- `7` - Primary Reference Holdover (–ø–æ—Å–ª–µ –ø–æ—Ç–µ—Ä–∏ GNSS)
- `13` - Application Specific (–±–µ–∑ –≤–Ω–µ—à–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)

**–ó–Ω–∞—á–µ–Ω–∏—è Accuracy:**
- `0x20` = 25 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥ (–¥–ª—è GNSS)
- `0x21` = 100 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥
- `0xFE` = Unknown

**–ó–Ω–∞—á–µ–Ω–∏—è Time Source:**
- `0x20` = GPS/GNSS ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**
- `0xA0` = Internal Oscillator
- `0x40` = Atomic Clock

---

## 5.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GNSS/PPS

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PPS –≤—Ö–æ–¥–∞

```yaml
inputs:
  primary_clocks:
    # PPS –æ—Ç GNSS –º–æ–¥—É–ª—è
    - protocol:          pps
      interface:         eth0
      pin:               0
      index:             0
      cable_delay:       30              # –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è u-blox LEA-M8F
      edge_mode:         "rising"        # –ü–µ—Ä–µ–¥–Ω–∏–π —Ñ—Ä–æ–Ω—Ç
      monitor_only:      false
      atomic:            false
      linked_device:     '/dev/ttyS0'    # –°–≤—è–∑–∞–Ω —Å GNSS
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã cable_delay –¥–ª—è u-blox LEA-M8F:

| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | cable_delay (–Ω—Å) | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------------|------------------|----------|
| LEA-M8F + –∫–æ—Ä–æ—Ç–∫–∏–π –∫–∞–±–µ–ª—å (< 1–º) | 20-30 | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–æ–¥—É–ª—è |
| LEA-M8F + –∫–∞–±–µ–ª—å 5–º | 50-60 | +25 –Ω—Å –Ω–∞ –∫–∞–±–µ–ª—å |
| LEA-M8F + –∫–∞–±–µ–ª—å 10–º | 70-80 | +50 –Ω—Å –Ω–∞ –∫–∞–±–µ–ª—å |

**–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞:**
```
cable_delay = –∑–∞–¥–µ—Ä–∂–∫–∞_–º–æ–¥—É–ª—è + (–¥–ª–∏–Ω–∞_–∫–∞–±–µ–ª—è_–≤_–º–µ—Ç—Ä–∞—Ö √ó 5)
cable_delay = 30 + (5 √ó 5) = 55 –Ω—Å
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è GNSS –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (majortime)

```yaml
secondary_clocks:
  # GNSS –º–æ–¥—É–ª—å –¥–ª—è majortime (–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞—Ç—É/–≤—Ä–µ–º—è –¥–ª—è PPS)
  - protocol:       timebeat_opentimecard_mini
    device:         '/dev/ttyS0'
    baud:           115200
    card_config:    ['gnss1:signal:gps+glonass']
    offset:         50000000          # 50 –º—Å –¥–ª—è u-blox M8F
    atomic:         false
    monitor_only:   false
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã offset –¥–ª—è —Ä–∞–∑–Ω—ã—Ö GNSS –º–æ–¥—É–ª–µ–π:

| GNSS –º–æ–¥—É–ª—å | offset (–Ω—Å) | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|-------------|----------|
| u-blox LEA-M8F | 50000000 | 50 –º—Å (–±—ã—Å—Ç—Ä—ã–π) |
| u-blox NEO-M8T | 50000000 | 50 –º—Å |
| –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π NMEA | 225000000 | 225 –º—Å (–º–µ–¥–ª–µ–Ω–Ω—ã–π) |

---

## 5.4 –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ü–æ—à–∞–≥–æ–≤–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞:

**–®–∞–≥ 1:** –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é

```bash
sudo cp /etc/shiwatime/shiwatime.yml /etc/shiwatime/shiwatime.yml.backup.$(date +%Y%m%d_%H%M%S)
```

**–®–∞–≥ 2:** –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
config
# –ò–ª–∏
sudo nano /etc/shiwatime/shiwatime.yml
```

**–®–∞–≥ 3:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å YAML

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ yamllint (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
sudo apt install yamllint

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª
yamllint /etc/shiwatime/shiwatime.yml
```

**–®–∞–≥ 4:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å

```bash
restart
# –ò–ª–∏
sudo systemctl restart shiwatime
```

**–®–∞–≥ 5:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
status

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
sudo journalctl -u shiwatime -n 50 | grep -i error
```

**–®–∞–≥ 6:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ 1-2 –º–∏–Ω—É—Ç—ã
logs
```

### –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
sudo cp /etc/shiwatime/shiwatime.yml.backup.* /etc/shiwatime/shiwatime.yml

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
sudo systemctl restart shiwatime

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo systemctl status shiwatime
```

---

# 6. –í–µ–±-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Grafana

## 6.1 –î–æ—Å—Ç—É–ø –∫ Grafana

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Shiwa Network.

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ—Å—Ç—É–ø–∞:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **URL** | http://90.156.231.174 |
| **–ê–¥–º–∏–Ω –ª–æ–≥–∏–Ω** | admin |
| **–ê–¥–º–∏–Ω –ø–∞—Ä–æ–ª—å** | admin |
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** | user |
| **–ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** | user |

### –û—Ç–∫—Ä—ã—Ç–∏–µ Grafana

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: **http://90.156.231.174**
3. –í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å
4. –í—ã –ø–æ–ø–∞–¥–µ—Ç–µ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É Grafana

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä Shiwa Network –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏–∑–¥–µ–ª–∏–π TimeCard Mini. –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ —ç—Ç–æ—Ç —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.

---

## 6.2 –û–±–∑–æ—Ä –¥–∞—à–±–æ—Ä–¥–æ–≤

–í Grafana –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

### 1. **PTP Sync Analysis** (–ê–Ω–∞–ª–∏–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ PTP)

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –ì—Ä–∞—Ñ–∏–∫ offset (—Å–º–µ—â–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏) –≤ –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥–∞—Ö
- –ì—Ä–∞—Ñ–∏–∫ drift (–¥—Ä–µ–π—Ñ–∞ —á–∞—Å—Ç–æ—Ç—ã)
- –ì—Ä–∞—Ñ–∏–∫ jitter (–¥—Ä–æ–∂–∞–Ω–∏—è)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫ —á–∞—Å–æ–≤

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞ –≤—ã–±–µ—Ä–∏—Ç–µ **Dashboards**
2. –ù–∞–π–¥–∏—Ç–µ **"PTP Sync Analysis"**
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ —Ñ–∏–ª—å—Ç—Ä–µ **Device**

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏:**
- Offset < 50 –Ω—Å - –æ—Ç–ª–∏—á–Ω–æ ‚úÖ
- Jitter < 20 –Ω—Å - –æ—Ç–ª–∏—á–Ω–æ ‚úÖ
- –°—Ç–∞–±–∏–ª—å–Ω—ã–π drift - —Ö–æ—Ä–æ—à–æ ‚úÖ

### 2. **GNSS Metrics** (–ú–µ—Ç—Ä–∏–∫–∏ GNSS)

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–∏–º—ã—Ö —Å–ø—É—Ç–Ω–∏–∫–æ–≤
- –ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–∞ GNSS
- GNSS offset
- Fix status (–Ω–∞–ª–∏—á–∏–µ —Ñ–∏–∫—Å–∞—Ü–∏–∏)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏:**
- –°–ø—É—Ç–Ω–∏–∫–æ–≤ > 8 - –æ—Ç–ª–∏—á–Ω–æ ‚úÖ
- –°–ø—É—Ç–Ω–∏–∫–æ–≤ 4-8 - –ø—Ä–∏–µ–º–ª–µ–º–æ ‚ö†Ô∏è
- –°–ø—É—Ç–Ω–∏–∫–æ–≤ < 4 - –ø–ª–æ—Ö–æ ‚ùå

### 3. **System Health** (–ó–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã)

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- CPU usage (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞)
- Memory usage (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏)
- Disk usage (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞)
- Network traffic (—Å–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫)
- Uptime (–≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã)

### 4. **Clock Performance** (–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–∞—Å–æ–≤)

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫ –≤ —Å–µ–∫—É–Ω–¥—É
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π offset –∑–∞ –ø–µ—Ä–∏–æ–¥
- –°—Ä–µ–¥–Ω–∏–π offset
- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

## 6.3 –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫

### PTP Offset (—Å–º–µ—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏)

**–ì—Ä–∞—Ñ–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç** —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —á–∞—Å–∞–º–∏ –∏ —ç—Ç–∞–ª–æ–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º.

**–ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è:**

| Offset | –û—Ü–µ–Ω–∫–∞ | –î–µ–π—Å—Ç–≤–∏—è |
|--------|--------|----------|
| 0 - 20 –Ω—Å | ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ | –ù–∏–∫–∞–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π |
| 20 - 50 –Ω—Å | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ |
| 50 - 100 –Ω—Å | ‚ö†Ô∏è –•–æ—Ä–æ—à–æ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ GNSS —Å–∏–≥–Ω–∞–ª |
| 100 - 500 –Ω—Å | ‚ö†Ô∏è –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–±–µ–ª–∏, –∞–Ω—Ç–µ–Ω–Ω—É |
| > 500 –Ω—Å | ‚ùå –ü–ª–æ—Ö–æ | –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ |
| > 1 –º–∫—Å | ‚ùå –ö—Ä–∏—Ç–∏—á–Ω–æ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é |

### GNSS Satellites (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø—É—Ç–Ω–∏–∫–æ–≤)

**–ì—Ä–∞—Ñ–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç** –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–∏–º—ã—Ö GNSS —Å–ø—É—Ç–Ω–∏–∫–æ–≤.

| –°–ø—É—Ç–Ω–∏–∫–∏ | –û—Ü–µ–Ω–∫–∞ | –ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ |
|----------|--------|------------------------|
| > 12 | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å |
| 8-12 | ‚úÖ –•–æ—Ä–æ—à–æ | –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ |
| 4-8 | ‚ö†Ô∏è –ü—Ä–∏–µ–º–ª–µ–º–æ | –í–æ–∑–º–æ–∂–Ω—ã –∫–æ–ª–µ–±–∞–Ω–∏—è |
| < 4 | ‚ùå –ü–ª–æ—Ö–æ | –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è |
| 0 | ‚ùå –ö—Ä–∏—Ç–∏—á–Ω–æ | –ù–µ—Ç GNSS —Å–∏–≥–Ω–∞–ª–∞ |

**–ü—Ä–∏—á–∏–Ω—ã –Ω–∏–∑–∫–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–ø—É—Ç–Ω–∏–∫–æ–≤:**
- –ü–ª–æ—Ö–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∞–Ω—Ç–µ–Ω–Ω—ã (–Ω–µ—Ç –æ–±–∑–æ—Ä–∞ –Ω–µ–±–∞)
- –ü–æ–º–µ—Ö–∏ –æ—Ç –¥—Ä—É–≥–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ù–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å –∞–Ω—Ç–µ–Ω–Ω—ã –∏–ª–∏ –∫–∞–±–µ–ª—è
- –ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

### System Load (–Ω–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã)

**–ì—Ä–∞—Ñ–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç** –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –ø–∞–º—è—Ç–∏ –∏ –¥–∏—Å–∫–∞.

**–ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è TimeCard Mini:**
- CPU: 5-15% (–≤ —Å—Ä–µ–¥–Ω–µ–º)
- Memory: 200-300 MB –∏–∑ 4 GB
- Disk: < 50% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## 6.4 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤

–í Grafana:
1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É **üîî Alerting** –≤ –ª–µ–≤–æ–º –º–µ–Ω—é
2. –í—ã–±–µ—Ä–∏—Ç–µ **Alert rules**
3. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –¢–∏–ø–∏—á–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã:

| –ê–ª–µ—Ä—Ç | –£—Å–ª–æ–≤–∏–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|-------|---------|----------|
| **High PTP Offset** | offset > 500 –Ω—Å | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å GNSS, –∫–∞–±–µ–ª–∏ |
| **GNSS Signal Lost** | satellites = 0 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–Ω—Ç–µ–Ω–Ω—É |
| **Service Down** | shiwatime stopped | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å |
| **High CPU Usage** | CPU > 80% | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã |
| **Low Disk Space** | disk > 85% | –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏ |

### Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ê–ª–µ—Ä—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º Shiwa Network. –î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Grafana.

---

# 7. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

## 7.1 –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
```bash
status
# Output: Active: inactive (dead)
```

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
sudo journalctl -u shiwatime -n 100 | grep -i error

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo yamllint /etc/shiwatime/shiwatime.yml

# 3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ
sudo /usr/share/shiwatime/bin/shiwatime -c /etc/shiwatime/shiwatime.yml

# 4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
sudo cp /etc/shiwatime/shiwatime.yml.backup /etc/shiwatime/shiwatime.yml
sudo systemctl restart shiwatime
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –í—ã—Å–æ–∫–∏–π PTP offset (> 500 –Ω—Å)

**–°–∏–º–ø—Ç–æ–º—ã:**
```
ts,2025-10-17 12:00:00.000000500 +0300 MSK,pps:eth0/0/0,primary,500ns,0s,false
```

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ GNSS —Å—Ç–∞—Ç—É—Å
ls -l /dev/ttyS0
sudo journalctl -u shiwatime | grep -i gnss | tail -20

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø—É—Ç–Ω–∏–∫–æ–≤
sudo cat /dev/ttyS0
# –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ $GPGGA —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–ø—É—Ç–Ω–∏–∫–æ–≤

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ cable_delay –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
config
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ cable_delay –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω –¥–ª—è –≤–∞—à–µ–≥–æ –∫–∞–±–µ–ª—è

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
restart
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: GNSS –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω

**–°–∏–º–ø—Ç–æ–º—ã:**
```
GNSS: ‚óè Not found
```

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
ls -l /dev/ttyS0

# –ï—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:
# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ UART –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Raspberry Pi
sudo nano /boot/firmware/config.txt
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å:
# enable_uart=1
# dtoverlay=uart1

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
# - –ê–Ω—Ç–µ–Ω–Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ GNSS –º–æ–¥—É–ª—é
# - GNSS –º–æ–¥—É–ª—å –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ Raspberry Pi

# 4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
sudo reboot
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ù–µ—Ç —Å–ø—É—Ç–Ω–∏–∫–æ–≤ GNSS

**–°–∏–º–ø—Ç–æ–º—ã:**
```
Satellites: 0
Fix: V (Invalid)
```

**–†–µ—à–µ–Ω–∏–µ:**

**–®–∞–≥ 1:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∞–Ω—Ç–µ–Ω–Ω—ã

- ‚úÖ –ê–Ω—Ç–µ–Ω–Ω–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —Å –ø—Ä—è–º—ã–º –æ–±–∑–æ—Ä–æ–º –Ω–µ–±–∞
- ‚ùå –ù–µ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ –∞–Ω—Ç–µ–Ω–Ω—É –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ –±–µ–∑ –æ–∫–æ–Ω
- ‚ùå –ò–∑–±–µ–≥–∞–π—Ç–µ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –Ω–∞–¥ –∞–Ω—Ç–µ–Ω–Ω–æ–π
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ: –Ω–∞ –∫—Ä—ã—à–µ –∏–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ

**–®–∞–≥ 2:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ –∞–Ω—Ç–µ–Ω–Ω—ã

```bash
# –ê–∫—Ç–∏–≤–Ω—ã–µ GNSS –∞–Ω—Ç–µ–Ω–Ω—ã —Ç—Ä–µ–±—É—é—Ç –ø–∏—Ç–∞–Ω–∏—è (–æ–±—ã—á–Ω–æ 3.3V –∏–ª–∏ 5V)
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∞–Ω—Ç–µ–Ω–Ω–∞ –ø–æ–ª—É—á–∞–µ—Ç –ø–∏—Ç–∞–Ω–∏–µ –æ—Ç GNSS –º–æ–¥—É–ª—è
```

**–®–∞–≥ 3:** –ü–æ–¥–æ–∂–¥–∏—Ç–µ "—Ö–æ–ª–æ–¥–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞"

```bash
# –•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç GNSS –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 5-15 –º–∏–Ω—É—Ç
# –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏:
sudo journalctl -u shiwatime -f | grep -i gnss
```

**–®–∞–≥ 4:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–º–µ—Ö–∏

```bash
# –û—Ç–∫–ª—é—á–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, —Å–æ–∑–¥–∞—é—â–∏–µ –ø–æ–º–µ—Ö–∏:
# - WiFi —Ä–æ—É—Ç–µ—Ä—ã —Ä—è–¥–æ–º —Å –∞–Ω—Ç–µ–Ω–Ω–æ–π
# - Bluetooth —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
# - –î—Ä—É–≥–∏–µ —Ä–∞–¥–∏–æ–ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∏
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 5: –°–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ, –Ω–æ –Ω–µ –≤–∏–¥–Ω—ã –≤ Grafana

**–°–∏–º–ø—Ç–æ–º—ã:**
- Shiwa Time —Ä–∞–±–æ—Ç–∞–µ—Ç
- –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å –º–µ—Ç—Ä–∏–∫–∏
- Grafana –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–†–µ—à–µ–Ω–∏–µ:**

**–®–∞–≥ 1:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Elasticsearch

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
ping 90.156.231.174

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Elasticsearch
config
# –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é output.elasticsearch
```

**–®–∞–≥ 2:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç –≤–∫–ª—é—á–µ–Ω

–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `/etc/shiwatime/shiwatime.yml` –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```yaml
output.elasticsearch:
  enabled: true
  hosts: ['90.156.231.174:9200']
```

**–®–∞–≥ 3:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ Elasticsearch

```bash
sudo journalctl -u shiwatime | grep -i elasticsearch
sudo journalctl -u shiwatime | grep -i "connection refused\|timeout"
```

**–®–∞–≥ 4:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å

```bash
restart
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 6: –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU

**–°–∏–º–ø—Ç–æ–º—ã:**
```bash
top
# CPU > 80% –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
```

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
top
# –ù–∞–∂–º–∏—Ç–µ 'P' –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ CPU

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö PTP –∫–ª–∏–µ–Ω—Ç–æ–≤
sudo ss -un | grep -E "319|320" | wc -l

# 3. –£–º–µ–Ω—å—à–∏—Ç–µ —á–∞—Å—Ç–æ—Ç—É sync —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
config
# –ò–∑–º–µ–Ω–∏—Ç–µ sync_interval —Å 0 –Ω–∞ 1 (—É–º–µ–Ω—å—à–∏—Ç —á–∞—Å—Ç–æ—Ç—É –≤ 2 —Ä–∞–∑–∞)

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
restart
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 7: –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏—Å–∫–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
```bash
df -h
# /dev/mmcblk0p2   15G  14G  500M  97% /
```

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# 1. –û—á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏
sudo journalctl --vacuum-time=7d   # –û—Å—Ç–∞–≤–∏—Ç—å –ª–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
sudo journalctl --vacuum-size=500M # –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤ –¥–æ 500 MB

# 2. –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à apt
sudo apt clean
sudo apt autoclean

# 3. –£–¥–∞–ª–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã
sudo apt autoremove

# 4. –ù–∞–π–¥–∏—Ç–µ –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã
sudo du -h /var/log | sort -rh | head -10

# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ
df -h
```

---

## 7.2 –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –¥–ª—è —Å–±–æ—Ä–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:

```bash
#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

echo "=== 1. System Information ==="
uname -a
uptime
free -h
df -h

echo -e "\n=== 2. Shiwa Time Status ==="
sudo systemctl status shiwatime --no-pager

echo -e "\n=== 3. GNSS Device ==="
ls -l /dev/ttyS0

echo -e "\n=== 4. Network Interfaces ==="
ip addr show
ethtool -T eth0

echo -e "\n=== 5. PTP Ports ==="
sudo ss -ulnp | grep -E "319|320"

echo -e "\n=== 6. Recent PPS Events ==="
sudo journalctl -u shiwatime -n 20 | grep pps

echo -e "\n=== 7. Recent GNSS Events ==="
sudo journalctl -u shiwatime -n 20 | grep gnss

echo -e "\n=== 8. Recent Errors ==="
sudo journalctl -u shiwatime -n 100 | grep -i error

echo -e "\n=== 9. Configuration Check ==="
sudo cat /etc/shiwatime/shiwatime.yml | grep -A 5 "primary_clocks:"
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –≤ —Ñ–∞–π–ª

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
./diagnostic.sh > ~/diagnostic_report_$(date +%Y%m%d_%H%M%S).txt

# –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª –Ω–∞ —Å–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä
# –° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
scp shiwa@192.168.16.163:~/diagnostic_report_*.txt ./
```

---

## 7.3 –°–±—Ä–æ—Å –∫ –∑–∞–≤–æ–¥—Å–∫–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï:** –≠—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è —É–¥–∞–ª–∏—Ç –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏!

### –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å–±—Ä–æ—Å–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
sudo systemctl stop shiwatime

# 2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo cp /etc/shiwatime/shiwatime.yml ~/shiwatime.yml.backup

# 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–æ–¥—Å–∫—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
# (–µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–ø–∏—è –∑–∞–≤–æ–¥—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫)
sudo cp /etc/shiwatime/shiwatime.yml.factory /etc/shiwatime/shiwatime.yml

# 4. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
sudo cp ~/TimeCard-Mini/shiwatime.yml /etc/shiwatime/shiwatime.yml

# 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
sudo systemctl restart shiwatime

# 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo systemctl status shiwatime
```

### –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –¥–æ—Å—Ç—É–ø)

–ï—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è:
1. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–∑–∞ —Å–∏—Å—Ç–µ–º—ã –Ω–∞ SD-–∫–∞—Ä—Ç—É
2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç—É `CLONING_GUIDE.md`

---

# 8. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## 8.1 –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `sudo systemctl start shiwatime` | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å |
| `sudo systemctl stop shiwatime` | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å |
| `sudo systemctl restart shiwatime` | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å |
| `sudo systemctl status shiwatime` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å |
| `sudo systemctl enable shiwatime` | –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ |
| `sudo systemctl disable shiwatime` | –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ |

### –ö–æ–º–∞–Ω–¥—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `sudo journalctl -u shiwatime -f` | –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ |
| `sudo journalctl -u shiwatime -n 100` | –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ |
| `sudo journalctl -u shiwatime --since today` | –õ–æ–≥–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è |
| `sudo journalctl -u shiwatime --since "1 hour ago"` | –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å |
| `sudo journalctl -u shiwatime \| grep pps` | –¢–æ–ª—å–∫–æ PPS —Å–æ–±—ã—Ç–∏—è |
| `sudo journalctl -u shiwatime \| grep gnss` | –¢–æ–ª—å–∫–æ GNSS —Å–æ–±—ã—Ç–∏—è |
| `sudo journalctl -u shiwatime \| grep error` | –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ |

### –ö–æ–º–∞–Ω–¥—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `sudo nano /etc/shiwatime/shiwatime.yml` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é |
| `sudo cp /etc/shiwatime/shiwatime.yml{,.bak}` | –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é |
| `yamllint /etc/shiwatime/shiwatime.yml` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å YAML |

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `ls -l /dev/ttyS0` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å GNSS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ |
| `sudo cat /dev/ttyS0` | –ß–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å GNSS |
| `ethtool -T eth0` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Hardware Timestamping |
| `sudo ss -ulnp \| grep -E "319\|320"` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PTP –ø–æ—Ä—Ç—ã |
| `sudo tcpdump -i eth0 port 319` | –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å PTP —Ç—Ä–∞—Ñ–∏–∫ |
| `ip addr show` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã |
| `uptime` | –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∏ –Ω–∞–≥—Ä—É–∑–∫–∞ |
| `free -h` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ |
| `df -h` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞ |

---

## 8.2 –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è PTP –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### Clock Class (–∫–ª–∞—Å—Å —á–∞—Å–æ–≤)

| –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|----------|----------|------------|
| 6 | Primary Reference (GNSS) | ‚úÖ –î–ª—è Grandmaster —Å GNSS |
| 7 | Primary Reference Holdover | –ü–æ—Å–ª–µ –ø–æ—Ç–µ—Ä–∏ GNSS |
| 13 | Application Specific | –ë–µ–∑ –≤–Ω–µ—à–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ |
| 52 | Degraded (10 –º–∫—Å) | –î–µ–≥—Ä–∞–¥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å |
| 187 | Degraded (1 –º—Å) | –°–∏–ª—å–Ω–æ –¥–µ–≥—Ä–∞–¥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è |
| 248 | Default | –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ |

### Accuracy (—Ç–æ—á–Ω–æ—Å—Ç—å)

| –ö–æ–¥ | –¢–æ—á–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|----------|
| 0x20 | 25 –Ω—Å | ‚úÖ –î–ª—è GNSS timing |
| 0x21 | 100 –Ω—Å | –î–ª—è –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω—ã—Ö TCXO |
| 0x22 | 250 –Ω—Å | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–≤–∞—Ä—Ü–µ–≤—ã–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã |
| 0x31 | 1 –º–∫—Å | –°–µ—Ç–µ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è |
| 0xFE | Unknown | –¢–æ—á–Ω–æ—Å—Ç—å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞ |

### Time Source (–∏—Å—Ç–æ—á–Ω–∏–∫ –≤—Ä–µ–º–µ–Ω–∏)

| –ö–æ–¥ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|----------|
| 0x10 | ATOMIC_CLOCK | –ê—Ç–æ–º–Ω—ã–µ —á–∞—Å—ã |
| 0x20 | GPS | ‚úÖ GPS/GNSS |
| 0x30 | TERRESTRIAL_RADIO | –ù–∞–∑–µ–º–Ω–æ–µ —Ä–∞–¥–∏–æ |
| 0x40 | PTP | PTP (–æ—Ç –¥—Ä—É–≥–æ–≥–æ Grandmaster) |
| 0x50 | NTP | NTP —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è |
| 0xA0 | INTERNAL_OSCILLATOR | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä |

---

## 8.3 –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Shiwa Network

- **–í–µ–±-—Å–∞–π—Ç:** https://shiwanetwork.tech/
- **–°–µ—Ä–≤–µ—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:** http://90.156.231.174
- **Email –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** support@shiwanetwork.tech
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. —Ñ–∞–π–ª—ã –≤ `/home/shiwa-time/TimeCard-Mini/`

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–û—Å–Ω–æ–≤–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** `README.md`
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `shiwatime_config_guide.md`
- **–ü–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥:** `SHIWATIME_GUIDE.md`
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** `MONITORING.md`
- **GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** (—É–∫–∞–∑–∞—Ç—å URL –µ—Å–ª–∏ –µ—Å—Ç—å)

---

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞: `status`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å GNSS –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –≤ Grafana
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å offset < 100 –Ω—Å
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø—É—Ç–Ω–∏–∫–æ–≤ > 4

### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞: `df -h`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å uptime –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª—é –≤ Grafana
- [ ] –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É: `sudo apt update && sudo apt upgrade`
- [ ] –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏: `sudo journalctl --vacuum-time=30d`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É: `vcgencmd measure_temp`
- [ ] –ê–Ω–∞–ª–∏–∑ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –≤ Grafana
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø–∞—Ä–æ–ª–∏, SSH –∫–ª—é—á–∏)

---

## –ì–ª–æ—Å—Å–∞—Ä–∏–π

| –¢–µ—Ä–º–∏–Ω | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| **PTP** | Precision Time Protocol (IEEE 1588-2019) - –ø—Ä–æ—Ç–æ–∫–æ–ª —Ç–æ—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ |
| **Grandmaster** | –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –≤—Ä–µ–º–µ–Ω–∏ –≤ PTP —Å–µ—Ç–∏ |
| **GNSS** | Global Navigation Satellite System - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–ø—É—Ç–Ω–∏–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ |
| **PPS** | Pulse Per Second - –∏–º–ø—É–ª—å—Å –≤ —Å–µ–∫—É–Ω–¥—É, –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω—ã–π —Å–∏–≥–Ω–∞–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ |
| **Offset** | –°–º–µ—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ - —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —á–∞—Å–∞–º–∏ –∏ —ç—Ç–∞–ª–æ–Ω–æ–º |
| **Jitter** | –î—Ä–æ–∂–∞–Ω–∏–µ - –≤–∞—Ä–∏–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ |
| **Drift** | –î—Ä–µ–π—Ñ - —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã —á–∞—Å–æ–≤ |
| **PHC** | PTP Hardware Clock - –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ —á–∞—Å—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π PTP |
| **Hardware Timestamping** | –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏ –≤ —Å–µ—Ç–µ–≤–æ–π –∫–∞—Ä—Ç–µ |
| **TAI** | International Atomic Time - –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ –∞—Ç–æ–º–Ω–æ–µ –≤—Ä–µ–º—è |
| **UTC** | Coordinated Universal Time - –≤—Å–µ–º–∏—Ä–Ω–æ–µ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è |
| **Holdover** | –†–µ–∂–∏–º —É–¥–µ—Ä–∂–∞–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –ø–æ—Ç–µ—Ä–∏ –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ |

---

**–ö–æ–Ω–µ—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞**

*–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ Quantum Mini-PCI Timecard*  
*–í–µ—Ä—Å–∏—è 1.0 –æ—Ç 17 –æ–∫—Ç—è–±—Ä—è 2025*  
*¬© Shiwa Network*

