
timebeat:

  # Расположение файла лицензионного ключа для премиум функций
  license.keyfile: '/etc/shiwatime/timebeat.lic'

  # Расположение файла конфигурации идентификаторов пиров (если не установлено: не сохранять в файл)
  config.peerids: '/etc/shiwatime/peerids.json'

  # Конфигурация синхронизации часов
  clock_sync:

    # Синхронизация часов

    # По умолчанию true включает синхронизацию часов, установка false только для мониторинга (false не будет корректировать часы)
    adjust_clock: true

    # Чтобы убрать ограничение на шаг времени, раскомментируйте строку ниже, это позволит часам прыгать без ограничений
    #step_limit: 15m # можно использовать "s", "h", "d" для обозначения секунд, часов или дней для лимита шага

    primary_clocks:

      # Пример конфигурации PTP
      - protocol:                 ptp
        domain:                   0
        serve_unicast: true                   # Раздавать время через unicast (точка-точка)
        max_unicast_subscribers: 0            # Максимум unicast клиентов (0 = без ограничений)
        serve_multicast: true                 # Раздавать время через multicast (широковещательно)
        server_only: true                     # Только сервер (режим grandmaster)
        announce_interval:        1           # Интервал announce сообщений (log₂ секунд)
        sync_interval:            0           # Интервал sync сообщений (log₂ секунд)
        delayrequest_interval:    0           # Интервал delay request (log₂ секунд)
        disable: false                        # Отключить конфигурацию часов
        interface: eth0                       # Сетевой интерфейс
        #unicast_master_table:    ['1.2.3.4','2.3.4.5', '3.4.5.6']  # Таблица unicast мастеров
        #delay_strategy:          e2e         # другие опции: 'p2p'
        #hybrid_e2e:              false       # Отправлять delay requests как unicast (enterprise профиль)
        #priority1:               128         # Приоритет 1 (меньше = выше)
        #priority2:               128         # Приоритет 2
        #monitor_only:            false       # Только мониторинг
        #use_layer2:              false       # Использовать PTP через Ethernet вместо IP/UDP
        interface: eth0
        #profile:                 'G.8275.2'  # другие опции: 'G.8275.1', 'G.8265.1' и 'enterprise-draft'
        #logsource:               'Grandmaster Clock в NY4'  # настраиваемое имя источника в логах
        #asymmetry_compensation:  0           # В наносекундах. Статическая компенсация известной асимметрии (+/- по необходимости)
        #max_packets_per_second:  0           # Если входящий поток пакетов превышает это значение, используется WRED алгоритм
        #peer_id:                 "Клиент XYZ"
        #sptp_enable:             false


      # Пример конфигурации PTP (дополнительный домен)
      #- protocol:               ptp
      #  domain:                 10
      #  serve_unicast: true
      #  serve_multicast: true
      #  server_only: true
      #  announce_interval:      1
      #  sync_interval:          0
      #  delayrequest_interval:  0
      #  unicast_master_table:   ['1.2.3.4','2.3.4.5', '3.4.5.6']
      #  delay_strategy:         e2e
      #  priority1:              128
      #  priority2:              128
      #  monitor_only:           false
      #  interface: eth0

      # Пример конфигурации NTP
      #- protocol:      ntp
      #  ip:            '1.2.3.4'  # Также можно использовать доменное имя, например: time.server.com
      #  pollinterval:  4s         # Протестированные значения: 500ms, 1s, 2s, 4s и 8s  # 4s рекомендуется для публичных NTP серверов
      #  monitor_only:  false

      # Пример конфигурации входного сигнала 1-PPS. 1-PPS выход можно настроить через Timebeat CLI
      - protocol:          pps
        interface:         eth0                # Ethernet интерфейс - "ethtool -T <iface>" ваш друг
        pin:               0                   # Обычно это номер SDP
        index:             0                   # Индекс / канал
        cable_delay:       0                   # Задержка кабеля в наносекундах (примерно ~5 нс на метр - хорошее значение)
        edge_mode:         "rising"            # Триггер PPS события для старых карт. Варианты: "rising", "falling" или "both"
        monitor_only:      false               # Используется для управления часами или только для мониторинга?
        atomic:            false               # Указать, является ли генератор атомным
        linked_device:     '/dev/ttyS0'        # Связанное NMEA или Timecard устройство ('ocp0/GNSS/1' например)
                                               # Конфигурация NMEA/Timecard должна существовать во вторичных часах). Это поддерживает
                                               # класс часов PTP и т.д. честным.

    # Вторичные часы. Когда все первичные источники недоступны, активируются следующие
    secondary_clocks:

      # Пример конфигурации PTP
      #- protocol:              ptp
      #  domain:                0
      #  serve_unicast:         true
      #  serve_multicast:       true
      #  server_only:           true
      #  announce_interval:     1
      #  sync_interval:         0
      #  delayrequest_interval: 0
      #  unicast_master_table:  ['1.2.3.4','2.3.4.5', '3.4.5.6']
      #  delay_strategy:        e2e  # Другие опции: 'p2p'
      #  priority1:             128
      #  priority2:             128
      #  monitor_only:          false
      #  interface:             enp2s0

      # Пример конфигурации PTP (дополнительный домен)
      #- protocol:              ptp
      #  domain:                10
      #  serve_unicast:         true
      #  serve_multicast:       true
      #  server_only:           true
      #  announce_interval:     1
      #  sync_interval:         0
      #  delayrequest_interval: 0
      #  unicast_master_table: ['1.2.3.4','2.3.4.5', '3.4.5.6']
      #  delay_strategy:        e2e
      #  priority1:             128
      #  priority2:             128
      #  monitor_only:          false
      #  interface:             enp2s0

      # Пример конфигурации NTP
      #- protocol:      ntp
      #  ip:            '1.2.3.4'  # Также можно использовать доменное имя, например: ntp.time.server.com
      #  pollinterval:  4s         # Протестированные значения: 500ms, 1s, 2s, 4s и 8s  # 4s рекомендуется для публичных NTP серверов
      #  monitor_only:  false
      #  serve_unicast: true
      #  interface:     enp3s1
      #  server_only:           true

      # Пример конфигурации входа NMEA-GNSS (может предоставить время для источников PPS)
      # Предполагается 8 бит данных, без бита четности и один стоп-бит (8N1)
      # (Не рекомендуется настраивать источник NMEA, если у вас есть альтернативный вторичный источник)
      #- protocol:     nmea
      #  device:       '/dev/ttyS0'  # Путь к последовательному устройству
      #  baud:         115200         # Скорость передачи последовательного устройства
      #  offset:       0              # Статическое смещение строки RMC
      #  monitor_only: false

      # Пример конфигурации входа GNSS приемников других производителей (может предоставить время для источников PPS)

      # Предполагается 8 бит данных, без бита четности и один стоп-бит (8N1)
      - protocol:     timebeat_opentimecard_mini   # Timebeat Timecard Mini
        device:       '/dev/ttyS0'                 # Путь к последовательному устройству
        baud:         115200                       # Скорость передачи последовательного устройства
        card_config:  ['gnss1:signal:gps+glonass'] # Конфигурация GNSS (GPS + ГЛОНАСС для России)

        offset:       225000000                    # Статическое смещение строки RMC
        atomic:       false                        # Указать, является ли генератор атомным
        monitor_only: false

      # OCP Timecard
      #- protocol:          ocp_timecard           # OCP Timecard
      #  ocp_device:        0                      # ID устройства (/sys/class/timecard/ocpX)
      #  oscillator_type:   'timebeat-rb-ql'      # Тип осциллятора
      #  card_config:
      #    - 'sma1:out:mac'                        # sma1-4: in/out: gnss1, gnss2, mac, phc и т.д.
      #    - 'gnss1:signal:gps+galileo+sbas'       # gnss1-2: signal: gps, galileo, sbas, beidou, qzss, glonass
      #    - 'mac:type:timebeat-rb-ql'             # mac: type: timebeat-rb-ql, timebeat-rb-sa45,
      #                                            #            timebeat-fusion-xt, timebeat-ocxo-rod
      #  offset:            0                      # В наносекундах. Статическая компенсация для вещей типа
      #  atomic:            false                  # Указать, является ли генератор атомным
      #  monitor_only:      false


      # Пример конфигурации входа PHC. Полезно для OCP-TAP / Meta Timecard, Azure и VMware
      #- protocol:     phc
      #  device:       '/dev/ptp_hyperv'  # Используете Azure? Мы знаем где вы...
      #  offset:       0                  # В наносекундах. Статическая компенсация для PHC с TAI (+/- по необходимости)
      #  monitor_only: false

      # Где мы дисциплинируем осциллятор с PPS от контакта (если у нас нет GNSS, но получаем время от PTP например)
      #- protocol:     oscillator
      #  active_on_group: ptp_feeds_from_venue
      #  active_on_min_sources: 2
      #  active_on_threshold: 10us
      #  pps.input:           # От осциллятора к программно определенному контакту (SDP - i210, i225, 226)
      #    interface: ens1
      #    index: 0
      #    pin: 0
      #    cable_delay: 0
      #    edge_mode: both
      #  pps.output:          # К осциллятору от канала (E810)
      #    interface: ens1
      #    index: 1
      #    channel: true
      #    cable_delay: 0
      #    edge_mode: rising
      #  monitor_only: false
      #  disable: false

    ptpsquared:

      # Включить функциональность PTPSquared
      # enable:                false

      # discovery:
      #   mdns:                true
      #   dht:                 false
      #   dht_seed_list:       ["/ip4/10.101.101.23/tcp/65107/p2p/16Uiu2HAmJiQvJQbja8pf5dKAZsSYxWmcDCxZaoYbMUL5X7GnXej9"]

      # keypath:               "/etc/shiwatime/ptp2key.private"

      # domains:               [115,116]

      # interface:             ens5f0

      # seats_to_offer:        4 # Количество мест, доступных для потребления времени с этого узла
      # seats_to_fill:         3 # Количество мест, которые этот узел стремится заполнить от других узлов для потребления времени
      # concurrent_sources:    1 # Количество одновременных источников PTP, используемых для управления нашими часами

      # active_sync_interval:         -3 # интервал sync для активных источников
      # active_delayrequest_interval: -3 # интервал delay request для активных источников
      # monitor_sync_interval:         0 # интервал sync для источников, которые мы мониторим
      # monitor_delayrequest_interval: 0 # интервал delay request для источников, которые мы мониторим

      # capabilities:          ["hqosc-1500"] # высококачественный осциллятор 1.5us дрифта за 24 часа
      # preference_score:      0              # Используется при запросе мощности из резерваций
      # reservations:          ["1500:50%:115,116", "750:25%"] # Список содержащий резервации мест клиентов:
                                                               #  <требуемый preference score> :
                                                               #  <процент мощности> :
                                                               #  <опциональный список разрешенных доменов через запятую>

      # debug:                 false # отладочное логирование специально для ptpsquared

      # advanced:

      #   asymmetry_compensation: 0 # В наносекундах. Статическая компенсация известной асимметрии (+/- по необходимости). Все интерфейсы

      #   is_better_factor:      1.4 # Насколько "лучше" должен быть источник, чтобы быть выбранным вместо текущего
      #   eos_weight:            1.0 # Вес, приписываемый расчету std dev ошибки источника при определении стоимости хопа

      # Все стоимости ниже по умолчанию равны нулю, что означает, что кумулятивная ошибка источника является единственным фактором
      # определяющим стоимость пути конкретного источника времени
      #   base_hop_cost:         0.0 # Стоимость по умолчанию одного хопа к downstream пирам
      #   swts_cost:             0.0 # Стоимость использования программных меток времени
      #   hwts_cost:             0.0 # Стоимость использования аппаратных меток времени

      # Включить функциональность анализа задержки
      #   latency_analysis_enable: false

    taas:

      # enable: false

      # clients:

      #   - name: "КомпанияABC"
      #     interface: ens1f0
      #     vlan: 101
      #     ips: ["1.2.3.4/24"]
      #     routes: ["5.6.7.0/24->1.2.3.1"]
      #     sources:
      #       - protocol:              ptp
      #         domain:                0
      #         serve_unicast:         true
      #         serve_multicast:       true
      #         announce_interval:     1
      #         sync_interval:         0
      #         delayrequest_interval: 0
      #         unicast_master_table:  ["1.2.3.4", "2.3.4.5", "3.4.5.6"]
      #         priority1:             128
      #         priority2:             128

      # templates:

      #   - name: "mcast-ptp-16tps"
      #     source:
      #       protocol:              ptp
      #       serve_multicast:       true
      #       announce_interval:     1
      #       sync_interval:         -4
      #       delayrequest_interval: -4
      #       profile:               'enterprise-draft'

    advanced:

      # Опции алгоритма управления
      steering:

        # Доступно несколько алгоритмов:
        #
        # alpha, beta, gamma, rho & sigma
        # Скорее всего вам понадобится алгоритм sigma в достаточно бесшумной
        # среде (низкий джиттер / низкая перегрузка сети). В менее идеальной
        # среде с аппаратными метками времени rho может быть лучше в зависимости
        # от обстоятельств. Если ваши серверы не поддерживают аппаратные метки времени,
        # то используйте алгоритм sigma.
        #
        # algo: sigma

        # Логировать составляющие алгоритма управления
        # algo_logging: false

        # Включить внешний фильтр выбросов (lucky packet в PTP)
        # outlier_filter_enabled: true

        # Доступно несколько типов фильтра выбросов
        # "strict" (строгий), "moderate" (умеренный) и "relaxed" (мягкий)
        # outlier_filter_type: strict

        # Разрешить серво, основанное на времени прибытия смещения
        # servo_offset_arrival_driven: true

      # В случае, если альтернативная система корректирует часы, timebeat прекратит активную работу и перейдет в режим мониторинга.
      # период времени, определенный в значении ниже
      interference_monitor:
        backoff_timer: 5m

      # Плавное изменение активно только когда смещение меньше границы шага,
      # Если смещение меньше лимита шага, но больше границы шага, время будет прыгнуто, а не плавно изменено,
      # Граница шага не может превышать лимит шага, она может быть равна ему,
      # Если смещение больше и лимита шага, и границы шага, часы не будут синхронизированы, не будет ни прыжков, ни плавного изменения,
      # Любое изменение конфигурации ниже переопределит лимиты по умолчанию/настроенные выше.
      extended_step_limits:

        #forward:            # Вперед
          #boundary: 500ms   # Граница
          #limit: 15m        # Лимит
        #backward:           # Назад
          #boundary: 500ms
          #limit: 15m

      windows_specific:

        # По умолчанию true, установка конфигурации в false изменит разрешение Windows Timer, значение true по умолчанию устанавливает разрешение Timer в точное значение.
        # disable_os_relax: true

      linux_specific:

        # Включить аппаратные метки времени в Linux SOF_TIMESTAMPING_(R|T)X_HARDWARE
        # (установка этого в false также отключит управление на основе PPS)
        # hardware_timestamping: true

        # Включить внешние программные метки времени в Linux SOF_TIMESTAMPING_(R|T)X_SOFTWARE
        # external_software_timestamping: true

        # Синхронизировать неосновные PHC (сетевые карты) часы в Linux
        sync_nic_slaves: true

        # Не синхронизировать эти часы в Linux
        # disable_adjustment: ['system', 'ens1', 'enp2s0']

        # Стратегия фиксированного смещения PHC (порядок предпочтения по умолчанию: 1-й: precise, 2-й (только драйвер sfc): efx
        # 3-й: extended, 4-й: pps, 5-й: basic). Список "<интерфейс>:<метод>"
        # phc_offset_strategy: ["ens1:pps"]

        # Назначить локальное предпочтение конкретному PHC для разрыва ничьей "ceteris paribus" становится основными часами
        # По умолчанию 0. Большее значение = больший приоритет
        # phc_local_pref: ["ens1:128"]

        # Механизм сглаживания PHC. По умолчанию "minimum". Другая опция "median". Список "<интерфейс>:<сглаживатель>"
        # phc_smoothing_strategy: ["ens1:median"]

        # Включить внутренний модифицированный фильтр выбросов lucky packet PHC
        # phc_lp_filter_enabled: false

        # Включить внутренний не-Гауссовский фильтр выбросов PHC
        # phc_ng_filter_enabled: false

        # Специфичные для интерфейса PHC выборки для определения смещения от системных часов (по умолчанию 15: список "<интерфейс>:<выборки>")
        # phc_samples: ["ens5f0:5"]

        # Использовать 1-step на списке интерфейсов ниже, если доступно
        # phc_one_step: ["ens5f0", "ens1"]

        # Смещение TAI. Опция "auto" по умолчанию выводит сначала nmea, затем ptp. Другие опции: 37s, ptp, nmea
        # tai_offset: auto

        # Конфигурация смещения PHC от UTC
        # phc_offsets: ["all:tai", "all:37s", "ens1:38s", "ens4f0:37000ms"]

        # Конфигурация PPS - включает выход PPS при запуске (дополняет enable/disable в runtime в CLI)
        # Формат "<интерфейс>:channel|<номер контакта>:<индекс>"
        # pps_config: ["ens1:1:0", "ensf2f0:channel:3"]

      ptp_tuning:

        # Включить сокеты PTP, которые привязываются ко всем интерфейсам. Если отключено, параметр interface
        # должен быть указан в конфигурации источника времени
        # enable_ptp_global_sockets: false

        # Случайно задерживать пакеты DELAY_REQ на 200-800ms от получения пакетов SYNC
        # (эта опция будет принудительно true для multicast источников независимо от значения ниже)
        # relax_delay_requests: true

        # Когда автообнаружение включено, ptp multicast источники будут автоматически настроены
        # как вторичные источники на основе полученных announce сообщений, если явная конфигурация
        # в домене не существует.
        # auto_discover_enabled: false

        # Установить PTP multicast TTL
        # (эта опция в настоящее время влияет только на Linux IPv4)
        # multicast_ttl: 1

        # Установить поле IP DSCP в PTP сообщениях
        # Принимается десятичное или имя поля, например, af33, 30, ef, 46 - все допустимые опции
        # dscp.general: 46
        # dscp.event: ef

        # Выход Sync (использовать *только* с аппаратными метками времени и только если требуется)
        # Некоторые сетевые карты пропускают много tx меток времени, если TX пакеты разнесены слишком плотно
        # Timebeat может компенсировать эту проблему, обеспечивая синхронизацию TX в его
        # серверных компонентах и вводя задержку между вызовами sendMsg. Структура в списке:
        # <интерфейс>:<задержка tx между ptp сообщениями>. Например, 5 микросекунд между сообщениями на
        # интерфейсе ens1:
        # synchronise_tx: ["ens1:5us"]

        # Стандарт PTP, которому следовать: 1588-2008 или 1588-2019
        # ptp_standard: "1588-2008" # По умолчанию 1588-2008

        # Качество часов (Clock Quality)
        clock_quality:
         auto:         false    # auto (по умолчанию) установить класс часов, точность и источник времени
         class:        6        # По умолчанию. Этот clockClass должен использоваться, если ни одно
                                # из других определений clockClass не применяется.
         accuracy:     0x20     # Время точно в пределах 25 наносекунд (для GNSS)
         variance:     0x4E20   # смещенная логарифмическая дисперсия неизвестна
         timesource:   0x20     # GPS (GNSS синхронизация)

      cli:

        # Включить SSH интерфейс CLI. Например, для доступа: ssh -p 65129 admin@127.0.0.1
        enable: true
        bind_port: 65129
        bind_host: 127.0.0.1

        # SSH ключ сервера. Если путь указан, ключ будет загружен или сгенерирован. Иначе ключ будет случайным при запуске
        server_key: "/etc/shiwatime/cli_id_rsa"

        # Авторизованные SSH ключи
        # authorised_keys: "/etc/shiwatime/authorised_keys"

        # Имя пользователя и пароль CLI
        username: "admin"
        password: "password"

      http:

        # Включить HTTP интерфейс статуса сервера. Например, для доступа: curl -o http://127.0.0.1:8088/

        # enable: false
        # bind_port: 8088
        # bind_host: 127.0.0.1

      logging:

        # Логировать информацию об управлении и источниках времени в stdout?
        # stdout.enable: true

        # Если мы отключены от Elastic - сколько записей мы отклоняем новых?
        # buffer_size: 10000 # записи - длительность буфера будет зависеть от количества настроенных источников времени

        # Логировать оповещения на удаленный syslog сервер?
        # syslog.enable: false
        # syslog.host: remote.syslog-server.com
        # syslog.port: 514




# ================================== Общее ===================================

# Имя shipper'а, который публикует сетевые данные. Может использоваться для группировки
# всех транзакций, отправленных одним shipper'ом в веб-интерфейсе.
name: TESTER

# Теги shipper'а включаются в их поле с каждой
# опубликованной транзакцией.
#tags: ["service-X", "web-tier"]

# Дополнительные поля, которые можно указать для добавления дополнительной информации к
# выводу.
#fields:
#  env: staging

# ================================= Дашборды =================================
# Эти настройки управляют загрузкой примеров дашбордов в индекс Kibana. Загрузка
# дашбордов по умолчанию отключена и может быть включена либо установкой
# опций здесь, либо с помощью команды `setup`.
setup.dashboards.enabled: false

# URL, откуда загружать архив дашбордов. По умолчанию этот URL
# имеет значение, которое вычисляется на основе имени и версии Beat. Для выпущенных
# версий этот URL указывает на архив дашборда на сайте artifacts.elastic.co
# website.
#setup.dashboards.url:

# Путь к директории Windows:
#setup.dashboards.directory: ${path.home}\kibana

# Путь к директории Linux:
#setup.dashboards.directory: ${path.home}/kibana

# ================================== Выводы ===================================

# Настройка вывода для отправки данных, собранных beat'ом.

# ---------------------------- Вывод Elasticsearch ----------------------------
output.elasticsearch:
  # Массив хостов для подключения.
  hosts: ['90.156.231.174:9200'] # вставьте IP адрес вашего elastic сервера
  # hosts: ['elastic.customer.timebeat.app:9200'] # формат хоста при использовании timebeat cloud

  # Протокол - либо `http` (по умолчанию) или `https` (https требуется для timebeat cloud).
  #protocol: 'https'

  # Учетные данные для аутентификации - либо API ключ или имя пользователя/пароль. Должно соответствовать вашим данным elastic, применимо только если настроено в elastic.
  #api_key: 'id:api_key'
  #username: 'elastic'
  #password: 'changeme'

# Детали подключения Timebeat Cloud PKI

  # ssl.certificate_authorities: ['/etc/shiwatime/pki/ca.crt']
  # ssl.certificate: '/etc/shiwatime/pki/timebeat.crt'
  # ssl.key: '/etc/shiwatime/pki/timebeat.key'
  # ssl.verification_mode: "certificate"

# -------------------------------- Вывод в файл ---------------------------------
output.file:
  # Булевый флаг для включения или отключения выходного модуля.
  enabled: false

  # Настройка кодирования JSON
  #codec.json:
    # Красивая печать JSON события
    #pretty: false

    # Настройка экранирования HTML символов в строках.
    #escape_html: false

  # Путь к директории, где сохранять сгенерированные файлы. Опция
  # обязательна.
  path: "/tmp/shiwatime"

  # Имя сгенерированных файлов. По умолчанию `timebeat` и генерирует
  # файлы: `timebeat-{datetime}.ndjson`, `timebeat-{datetime}-1.ndjson`, и т.д.
  filename: timebeat

  # Максимальный размер в килобайтах каждого файла. Когда этот размер достигнут, и при
  # каждом перезапуске Timebeat, файлы ротируются. Значение по умолчанию 10240
  # kB.
  rotate_every_kb: 10000

  # Максимальное количество файлов по пути. Когда это количество файлов достигнуто,
  # самый старый файл удаляется, а остальные сдвигаются с последнего на первый. По
  # умолчанию 7 файлов.
  number_of_files: 7

  # Права для создания файла. По умолчанию 0600.
  permissions: 0600

  # Настройка автоматической ротации файла при каждом запуске. По умолчанию true.
  rotate_on_startup: true


# ====================== Управление жизненным циклом индекса (ILM) ======================

# Настройка управления жизненным циклом индекса (ILM) для управления резервными индексами
# ваших потоков данных.

# Включить поддержку ILM. Допустимые значения: true, false.
setup.ilm.enabled: true

# Установить имя политики жизненного цикла. Имя политики по умолчанию -
# 'beatname'.
setup.ilm.policy_name: "shiwatime"

# Путь к JSON файлу, который содержит конфигурацию политики жизненного цикла. Используется
# для загрузки вашей собственной политики жизненного цикла.
#setup.ilm.policy_file:

# Отключить проверку существующей политики жизненного цикла. По умолчанию true. Если
# вы отключите эту проверку, установите setup.ilm.overwrite: true, чтобы политика жизненного цикла
# могла быть установлена.
setup.ilm.check_exists: true

# Перезаписать политику жизненного цикла при запуске. По умолчанию false.
#setup.ilm.overwrite: false


setup.ilm.rollover_alias: "shiwatime"

# ================================== Логирование ===================================

# Есть четыре опции для вывода логов: file, stderr, syslog, eventlog
# Вывод в файл по умолчанию.

# Устанавливает уровень лога. Уровень лога по умолчанию - info.
# Доступные уровни логов: error, warning, info, debug
#logging.level: info

# Если включено, Timebeat периодически логирует свои внутренние метрики, которые изменились
# за последний период. Для каждой метрики, которая изменилась, логируется дельта от значения в
# начале периода. Также общие значения для
# всех ненулевых внутренних метрик логируются при завершении. По умолчанию true.
#logging.metrics.enabled: true

# Период, после которого логировать внутренние метрики. По умолчанию 30s.
#logging.metrics.period: 30s

# Логирование в ротируемые файлы. Установите logging.to_files в false для отключения логирования в
# файлы.
logging.to_files: true
logging.files:
  # Настройка пути, где записываются логи. По умолчанию это директория logs
  # под домашним путем (расположение бинарника).
  path: /var/log/shiwatime

  # Имя файлов, куда записываются логи.
  name: timebeat

  # Настройка лимита размера файла лога. Если лимит достигнут, файл лога будет автоматически
  # ротирован
  rotateeverybytes: 10485760 # = 10MB

  # Количество ротированных файлов логов для хранения. Самые старые файлы будут удалены первыми.
  keepfiles: 7

  # Маска прав для применения при ротации файлов логов. Значение по умолчанию 0600.
  # Должна быть действительная маска прав файла в стиле Unix, выраженная в восьмеричной нотации.
  permissions: 0600

  # Включить ротацию файла лога по временным интервалам в дополнение к ротации по размеру.
  # Интервалы должны быть не менее 1s. Значения 1m, 1h, 24h, 7*24h, 30*24h и 365*24h
  # выравниваются по границам с минутами, часами, днями, неделями, месяцами и годами как
  # сообщается местными системными часами. Все остальные интервалы вычисляются от
  # эпохи Unix. По умолчанию отключено.
  #interval: 0

  # Ротировать существующие логи при запуске, а не добавлять к существующему
  # файлу. По умолчанию true.
  # rotateonstartup: true
# ============================== Безопасность процесса ==============================

# Отключить фильтрацию системных вызовов, так как нам требуется доступ к системным часам
seccomp.enabled: false

# ============================= Мониторинг X-Pack ==============================
# Timebeat может экспортировать внутренние метрики в центральный кластер Elasticsearch для мониторинга
# cluster. Это требует включения xpack monitoring в Elasticsearch. По
# умолчанию отчетность отключена.

# Установить в true для включения репортера мониторинга.
monitoring.enabled: false

# Устанавливает UUID кластера Elasticsearch, под которым данные мониторинга для этого
# экземпляра Timebeat будут появляться в UI Stack Monitoring. Если output.elasticsearch
# включен, UUID выводится из кластера Elasticsearch, на который ссылается output.elasticsearch.
#monitoring.cluster_uuid:

# Раскомментируйте для отправки метрик в Elasticsearch. Большинство настроек из
# вывода Elasticsearch также принимаются здесь.
# Обратите внимание, что настройки должны указывать на ваш кластер Elasticsearch для *мониторинга*.
# Любая настройка, которая не установлена, автоматически наследуется из конфигурации
# вывода Elasticsearch, поэтому если у вас настроен вывод Elasticsearch так,
# что он указывает на ваш кластер Elasticsearch для мониторинга, вы можете просто
# раскомментировать следующую строку.
#monitoring.elasticsearch:


