# Руководство по проверке Timebeat CLI на наличие команд для настройки timepulse

## Введение

Shiwatime/Timebeat имеет CLI интерфейс, который может предоставлять команды для настройки различных параметров, включая возможно длительность импульса PPS.

## Документация

**Официальная документация по командам CLI:**
https://support.timebeat.app/hc/en-gb/articles/9168809043346-What-commands-are-available-in-the-Timebeat-CLI

## Подключение к CLI

### Настройка CLI в конфигурации

Убедитесь, что CLI включен в конфигурации `/etc/shiwatime/shiwatime.yml`:

```yaml
timebeat:
  clock_sync:
    advanced:
      cli:
        enable: true
        bind_port: 65129
        bind_host: 127.0.0.1
        username: "admin"
        password: "password"
```

### Подключение

```bash
ssh -p 65129 admin@127.0.0.1
```

Или через telnet (если SSH недоступен):
```bash
telnet 127.0.0.1 65129
```

## Проверка доступных команд

После подключения к CLI:

1. **Просмотр всех команд:**
   ```
   help
   ```

2. **Поиск команд связанных с timepulse/PPS:**
   ```
   help | grep -i pulse
   help | grep -i pps
   help | grep -i timepulse
   help | grep -i tp5
   ```

3. **Просмотр команд конфигурации:**
   ```
   help | grep -i config
   help | grep -i set
   ```

## Возможные команды для проверки

Исходя из документации и структуры shiwatime, возможные команды могут быть:

- `set timepulse ...` - настройка time pulse
- `set device timepulse ...` - настройка time pulse устройства
- `configure timepulse ...` - конфигурация time pulse
- `set pulse width ...` - установка длительности импульса
- `set tp5 ...` - настройка TP5 (Time Pulse 5)

## Следующие шаги

После проверки CLI:

1. **Если команды найдены:**
   - Задокументировать синтаксис команд
   - Создать скрипт для автоматической настройки
   - Обновить документацию с примерами использования

2. **Если команды не найдены:**
   - Обратиться к поддержке Timebeat с запросом о возможности настройки timepulse через CLI
   - Рассмотреть другие варианты решения проблемы

## Пример проверки

```bash
# Подключение к CLI
ssh -p 65129 admin@127.0.0.1

# После подключения:
> help
# Изучить список команд

# Попробовать найти команды для timepulse
> help | grep pulse
> help | grep pps
> help | grep timepulse

# Если найдены команды, попробовать их использовать
# (примеры, если команды существуют)
> set timepulse width 5ms
> configure device /dev/ttyS0 timepulse width 5ms
```

## Отчет о результатах

После проверки CLI, заполните эту информацию:

- [ ] CLI доступен и работает
- [ ] Найдены команды для настройки timepulse
- [ ] Команды протестированы и работают
- [ ] Создан скрипт для автоматической настройки
- [ ] Документация обновлена

**Дата проверки:** _______________

**Результаты:**
```
[Здесь описать найденные команды и результаты тестирования]
```

---

**Важно:** Если команды для настройки timepulse найдены в CLI, это может быть решением проблемы, которое позволит настраивать длительность импульса без необходимости модификации shiwatime или обращения к разработчикам.

