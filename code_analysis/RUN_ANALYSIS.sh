#!/bin/bash
# Скрипт для запуска анализа на устройстве

echo "================================================================================
ЗАПУСК АНАЛИЗА SERVO АЛГОРИТМОВ
================================================================================
"

# 1. Поиск функций по известным именам
echo "1. Поиск servo функций по известным именам..."
python3 find_servo_by_names.py

echo ""
echo "================================================================================
"

# 2. Если функции найдены, запускаем детальный анализ
if [ -f "servo_functions_found.txt" ]; then
    echo "2. Функции найдены! Запускаем детальный анализ..."
    python3 analyze_servo_algorithms.py
else
    echo "2. Функции не найдены автоматически."
    echo "   Попробуйте вручную:"
    echo "   nm -D /usr/share/shiwatime/bin/shiwatime | grep -i adjusttime"
    echo "   nm -D /usr/share/shiwatime/bin/shiwatime | grep -i 'servo.*clock'"
fi

echo ""
echo "================================================================================
АНАЛИЗ ЗАВЕРШЕН
================================================================================
"
